<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>โปรเจค: Guru (x)</title>
<link rel="stylesheet" type="text/css" href="styles.css" />
<link href="dark.css" rel="stylesheet">
<style>
    body {
  overflow: hidden;
}
     .black-box {
    background-color: black;
    color: white;
    padding: 10px;
    width: 99%;
    overflow: hidden;
    position: relative;
  }
  .flashing-bar {
    width: 10px;
    height: 15px;
    background-color: white;
	position: absolute;
    animation: flashing 1.5s infinite;
  }

  @keyframes flashing {
    0%, 49% {
      opacity: 0;
    }
    50%, 100% {
      opacity: 1;
    }
  }
</style>
        </head>
    <body>
      	<div class="black-box"><center>
<div class="flashing-bar"></div><i>กดปุ่ม > เพื่อสุ่มความรู้ในคลังข้อมูล</i>
</center></div>
    <table style="width: 100%; ">
        <tr>
            <td><center>
                       <img src="img/random.png" onclick="randomWisdom()" width="10%">
                       <h2><div id="Clipname"></div></h2>
                    </center>
                   </td>
                   </tr>
        <tr>
          <td>
            <div style="position: relative; padding-bottom: 49%; height: 0;">
                <div id="vdo"></div>
            </div>
          </td>
        </tr>

      </table>

               
      <script src="engine/data.js"></script>
        <script>
     if(/^\?fbclid=/.test(location.search))
     location.replace(location.href.replace(/\?fbclid.+/, ""));
    
        randomDataElement = document.getElementById("random-data");
        randomIndex = Math.floor(Math.random() * data.length);
        randomItem = data[randomIndex];

            Iframex1 = '<iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 80%;" src="https://www.youtube.com/embed/'
            Iframex2 = '" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" ></iframe>'

            document.getElementById('Clipname').innerHTML= randomItem.name
            document.getElementById('vdo').innerHTML= Iframex1 + randomItem.x +'?start=' + randomItem.y + '&end=' + randomItem.z + Iframex2
            Clipname = randomItem.name
            document.title = randomItem.name + ' ••>โปรเจค: Guru'


    
            var textToSpeak = randomItem.name;
setTimeout(function() {
  var speechSynthesisUtterance = new SpeechSynthesisUtterance(textToSpeak);
  speechSynthesisUtterance.lang = "TH"; // Set the language (Thai in this case)
  speechSynthesisUtterance.pitch = 5; // Range from 0 to 2, where 1 is the default
  speechSynthesisUtterance.rate = 0.9;  // Range from 0.1 to 10, where 1 is the default
  speechSynthesisUtterance.volume = 7; // Valid range is from 0 to 1
  window.speechSynthesis.speak(speechSynthesisUtterance);
}, 1000); 

            </script>
            <script src="https://artnp.github.io/guru/engine/data.js"></script>
            <script>
            function countLines(content) {
            lines = content.split('\n')
            return lines.length;
        }
        var scriptTag = document.querySelector('script[src="https://artnp.github.io/guru/engine/data.js"]')
        var contentURL = scriptTag.getAttribute('src')

            function randomWisdom(){
                const randomIndex = Math.floor(Math.random() * data.length);
                const randomItem = data[randomIndex];
                document.getElementById('Clipname').innerHTML= randomItem.name
                document.getElementById('vdo').innerHTML= Iframex1 + randomItem.x + '?start=' + randomItem.y + '&end=' + randomItem.z + Iframex2
                startSec = randomItem.y
                endSec = randomItem.z
                timeCode = ((Number(endSec)-Number(startSec))).toFixed(2)
            if (timeCode >= 60){
                timeCode2 = (timeCode/60).toFixed(2)
                document.getElementById('timeCode').innerHTML= timeCode2.match(/\d+/)[0]+' นาที : '+ timeCode2.split('.')[1] + ' วินาที'
            } else if (timeCode < 60){
                document.getElementById('timeCode').innerHTML= timeCode.match(/\d+/)[0]+' วินาที'
            }
            
            document.title = randomItem.name + ' ••>โปรเจค: Guru'
            document.getElementById('shareThis').value = window.location.origin + '/guru/index.html#'+randomItem.name+'@$'+ randomItem.x + '?start=' + randomItem.y + '&end=' + randomItem.z
            
         
            var textToSpeak = randomItem.name;
setTimeout(function() {
  var speechSynthesisUtterance = new SpeechSynthesisUtterance(textToSpeak);
  speechSynthesisUtterance.lang = "TH"; // Set the language (Thai in this case)
  speechSynthesisUtterance.pitch = 5; // Range from 0 to 2, where 1 is the default
  speechSynthesisUtterance.rate = 0.9;  // Range from 0.1 to 10, where 1 is the default
  speechSynthesisUtterance.volume = 7; // Valid range is from 0 to 1
  window.speechSynthesis.speak(speechSynthesisUtterance);
}, 1000); 

        }
        </script>
    </body>
</html>